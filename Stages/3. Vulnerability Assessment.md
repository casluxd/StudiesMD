
Durante a fase de avaliação de vulnerabilidade, examinamos e analisamos as informações coletadas durante a fase de coleta de informações. A fase de avaliação de vulnerabilidade é um processo analítico baseado nas descobertas.

![[Pasted image 20230613185201.png]]

Uma análise é um exame detalhado de um evento ou processo, descrevendo sua origem e impacto, que com a ajuda de certas precauções e ações, pode ser acionado para apoiar ou prevenir futuras ocorrências.

Qualquer análise pode ser muito complicada, pois muitos fatores diferentes e suas interdependências desempenham um papel significativo Além de trabalharmos com os três tempos diferentes (passado, presente e futuro) em cada análise, a origem e o destino desempenham um papel significativo. Existem quatro tipos diferentes de análise:

- Descritiva: A análise descritiva é essencial em qualquer análise de dados. Por um lado, descreve um conjunto de dados baseado em características individuais. Ajuda a detectar possíveis erros na coleta de dados ou outliers no conjunto de dados.
- Diagnóstico: A análise diagnóstica esclarece as causas, efeitos e interações das condições. Fazer isso fornece insights que são obtidos por meio de correlações e interpretações. Devemos ter uma visão retrospectiva, semelhante à análise descritiva, com a sutil diferença de que tentamos encontrar razões para eventos e desenvolvimentos.
- Preditivo: Ao avaliar dados históricos e atuais, a análise preditiva cria um modelo preditivo para probabilidades futuras. Com base nos resultados de análises descritivas e diagnósticas, esse método de análise de dados permite identificar tendências, detectar desvios dos valores esperados em um estágio inicial e prever ocorrências futuras com a maior precisão possível.
- Prescritivo: A análise prescritiva visa restringir quais ações tomar para eliminar ou prevenir um problema futuro ou desencadear uma atividade ou processo específico.

Usamos nossos resultados e informações obtidos até agora e os analisamos para tirar conclusões. A formação de conclusões pode ser estendida muito longe, mas devemos então confirmá-las ou refutá-las. Suponha que encontramos uma porta TCP aberta 2121 em um host durante a fase de coleta de informações.

Além do fato de que esta porta está aberta, o Nmap não nos mostrou mais nada. Devemos agora nos perguntar que conclusões podemos tirar desse resultado. Portanto, não importa com qual pergunta partimos para tirar nossas conclusões. No entanto, é essencial fazer perguntas precisas e lembrar o que sabemos e o que não sabemos. Neste ponto, devemos primeiro nos perguntar o que vemos e o que realmente temos, porque o que vemos não é o mesmo que temos:
- uma porta TCP 2121. - TCP já significa que este serviço é orientado a conexão.
- Esta é uma porta padrão? - Não, porque estão entre 0-1023, também conhecidas como portas do sistema ou bem conhecidas
- Há algum número neste número de porta que pareça familiar? - Sim, porta TCP 21 (FTP). Pela nossa experiência, conheceremos muitas portas padrão e seus serviços, que os administradores muitas vezes tentam disfarçar, mas costumam usar alternativas "fáceis de lembrar".

Com base em nossa suposição, podemos tentar nos conectar ao serviço usando o Netcat ou um cliente FTP e tentar estabelecer uma conexão para confirmar ou refutar nossa suposição. 

Ao conectar-se ao serviço, notamos que a conexão demorou mais do que o normal (cerca de 15 segundos). Existem alguns serviços cuja velocidade de conexão, ou tempo de resposta, pode ser configurada. Agora que sabemos que um servidor FTP está sendo executado nesta porta, podemos deduzir a origem de nossa verificação "falha". Poderíamos confirmar isso novamente especificando o tempo mínimo de ida e volta da sonda (--min-rtt-timeout) no Nmap para 15 ou 20 segundos e executando novamente a varredura.


## Vulnerability Research and Analysis

Coleta de informações e pesquisa de vulnerabilidades podem ser consideradas uma parte da análise descritiva. É aqui que identificamos os componentes individuais da rede ou do sistema que estamos investigando. Na pesquisa de vulnerabilidades, procuramos vulnerabilidades conhecidas, explorações e falhas de segurança que já foram descobertas e relatadas. Portanto, se identificamos uma versão de um serviço ou aplicativo por meio da coleta de informações e encontramos uma vulnerabilidade e exposição comum (CVE), é muito provável que essa vulnerabilidade ainda esteja presente.

Podemos encontrar divulgações de vulnerabilidade para cada componente usando muitas fontes diferentes. Estes incluem, mas não estão limitados a:

- CVEdetails
- Packet Storm Security
- Exploit DB
- NIST
- SecurityFocus
- Vulners

É aqui que a Análise Diagnóstica e a Análise Preditiva são usadas. Depois de encontrar uma vulnerabilidade publicada como esta, podemos diagnosticá-la para determinar o que está causando ou causou a vulnerabilidade. Aqui, devemos entender a funcionalidade do código Proof-Of-Concept (POC) ou do próprio aplicativo ou serviço da melhor maneira possível, pois muitas configurações manuais pelos administradores exigirão alguma personalização para o POC. Cada POC é adaptado a um caso específico que também precisaremos adaptar ao nosso na maioria dos casos.

## Assessment of Possible Attack Vectors

A avaliação de vulnerabilidade também inclui o teste real, que faz parte da análise preditiva. Ao fazer isso, analisamos informações históricas e as combinamos com as informações atuais que conseguimos descobrir. Quer tenhamos recebido requisitos específicos de nível de evasão de nosso cliente, testamos os serviços e aplicativos encontrados localmente ou no sistema de destino. Se tivermos que testar secretamente e evitar alertas, devemos espelhar o sistema de destino localmente com a maior precisão possível. Isso significa que usamos as informações obtidas durante nossa fase de coleta de informações para replicar o sistema de destino e, em seguida, procurar vulnerabilidades no sistema implantado localmente.

## The Return

Suponha que não sejamos capazes de detectar ou identificar possíveis vulnerabilidades em nossa análise. Nesse caso, retornaremos ao estágio de coleta de informações e buscaremos informações mais aprofundadas do que coletamos até agora. É importante observar que esses dois estágios (recolha de informações e avaliação de vulnerabilidade) muitas vezes se sobrepõem, resultando em um movimento regular de ida e volta entre eles. Veremos isso em muitos vídeos em que o autor está resolvendo uma caixa HTB ou algum desafio CTF. Devemos lembrar que esses desafios geralmente são resolvidos o mais rápido possível e, portanto, a velocidade é mais importante do que a qualidade. Em um CTF, o objetivo é entrar na máquina de destino e capturar os sinalizadores com os privilégios mais altos o mais rápido possível, em vez de expor todos os possíveis pontos fracos do sistema. 

`Um teste de penetração (real) não é um CTF.`

Aqui a qualidade e intensidade do nosso teste de penetração e sua análise têm a maior prioridade porque nada é pior se o nosso cliente é hackeado com sucesso por meio de um vetor relativamente simples que deveríamos ter descoberto durante nosso teste de penetração.

