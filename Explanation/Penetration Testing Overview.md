
A TI é parte integrante de quase todas as empresas. A quantidade de dados críticos e confidenciais armazenados em sistemas de TI está em constante crescimento, assim como a dependência do funcionamento ininterrupto dos sistemas de TI em uso. Portanto, ataques contra redes corporativas, interrupção da disponibilidade do sistema e outras formas de causar danos significativos a uma empresa (como ataques de ransomware) estão se tornando cada vez mais comuns. Informações importantes da empresa obtidas por meio de violações de segurança e ataques cibernéticos podem ser vendidas a concorrentes, vazadas em fóruns públicos ou usadas para outros fins nefastos. As falhas do sistema são acionadas deliberadamente porque são cada vez mais difíceis de neutralizar.

Um teste de penetração (Pentest) é uma tentativa de ataque organizada, direcionada e autorizada para testar a infraestrutura de TI e seus defensores para determinar sua suscetibilidade a vulnerabilidades de segurança de TI. Um pentest usa métodos e técnicas que os invasores reais usam. Como testadores de penetração, aplicamos várias técnicas e análises para avaliar o impacto que uma determinada vulnerabilidade ou cadeia de vulnerabilidades pode ter na confidencialidade, integridade e disponibilidade dos sistemas e dados de TI de uma organização.

Um pentest visa descobrir e identificar TODAS as vulnerabilidades nos sistemas sob investigação e melhorar a segurança dos sistemas testados. 

Outras avaliações, como uma avaliação de equipe vermelha, podem ser baseadas em cenários e focar apenas nas vulnerabilidades aproveitadas para alcançar um objetivo final específico (ou seja, acessar a caixa de entrada de e-mail do CEO ou obter um sinalizador plantado em um servidor crítico).

## Risk Management

Em geral, também faz parte da gestão de riscos de uma empresa. O principal objetivo do gerenciamento de riscos de segurança de TI é identificar, avaliar,
e mitigar quaisquer riscos potenciais que possam prejudicar a confidencialidade, integridade e disponibilidade dos sistemas de informação e dados de uma organização e reduzir o risco geral a um nível aceitável. Isso é feito implementando os controles e políticas de segurança apropriados, incluindo controle de acesso, criptografia e outras medidas de segurança. Ao reservar um tempo para gerenciar adequadamente os riscos de segurança dos sistemas de TI de uma organização, é possível garantir que os dados sejam mantidos seguros e protegidos.

No entanto, não podemos eliminar todos os riscos. Ainda existe a natureza do risco inerente de uma violação de segurança que está presente mesmo quando a organização tomou todas as medidas razoáveis ​​para gerenciar o risco. Portanto, alguns riscos permanecerão. O risco inerente é o nível de risco que está presente mesmo quando os controles de segurança apropriados estão em vigor. Por exemplo, eles podem adquirir um seguro para cobrir certos riscos, como desastres naturais ou acidentes. Ao entrar em um contrato, eles também podem transferir seus riscos para outra parte, como um provedor de serviços terceirizado. Além disso, eles podem implementar medidas preventivas para reduzir a probabilidade de ocorrência de certos riscos e, se certos riscos ocorrerem, podem implementar processos para minimizar seu impacto. Finalmente, podem usar instrumentos financeiros, como derivativos, para reduzir as consequências econômicas de riscos específicos. Todas essas estratégias podem ajudar as empresas a gerenciar seus riscos com eficácia.

Durante um pentest, preparamos uma documentação detalhada sobre as etapas realizadas e os resultados alcançados. No entanto, é de responsabilidade do cliente ou do operador de seus sistemas sob investigação a correção das vulnerabilidades encontradas. Nossa função é como consultores confiáveis ​​para relatar vulnerabilidades, etapas detalhadas de reprodução e fornecer recomendações de correção apropriadas, mas não aplicamos patches ou fazemos alterações de código, etc. É importante observar que um pentest não está monitorando a infraestrutura ou os sistemas de TI, mas um instantâneo momentâneo do status de segurança. Uma declaração a esse respeito deve ser refletida em nosso relatório de teste de penetração.

## Vulnerability Assessments

A análise de vulnerabilidade é um termo genérico que pode incluir avaliações de vulnerabilidade ou segurança e testes de penetração. Em contraste com um teste de penetração, as avaliações de vulnerabilidade ou segurança são realizadas usando ferramentas puramente automatizadas. Os sistemas são verificados em relação a problemas conhecidos e vulnerabilidades de segurança, executando ferramentas de verificação como Nessus, Qualys, OpenVAS e similares. Na maioria dos casos, essas verificações automatizadas não conseguem adaptar os ataques às configurações do sistema de destino. É por isso que o teste manual conduzido por um testador humano experiente é essencial.

Por outro lado, um pentest é uma mistura de teste/validação automatizado e manual e é realizado após extensa, na maioria dos casos, coleta manual de informações. É adaptado individualmente e ajustado ao sistema que está sendo testado. Planejamento, execução e seleção das ferramentas utilizadas são muito mais complexos em um pentest. Tanto os testes de penetração como outras avaliações de segurança só podem ser realizados após acordo mútuo entre a empresa contratante e a organização que emprega o testador de penetração. Isso ocorre porque testes individuais e atividades realizadas durante o pentest podem ser tratados como ofensas criminais se o testador não tiver autorização explícita por escrito para atacar os sistemas do cliente. A organização que encomenda o teste de penetração só pode solicitar testes contra seus próprios ativos. Se eles estiverem usando terceiros para hospedar sites ou outras infraestruturas, eles precisam obter aprovação explícita por escrito dessas entidades na maioria dos casos. Empresas como a Amazon não exigem mais autorização prévia para testar determinados serviços de acordo com esta política, se uma empresa estiver usando a AWS para hospedar parte ou toda a sua infraestrutura. Isso varia de provedor para provedor, portanto, é sempre melhor confirmar a propriedade do ativo com o cliente durante a fase de definição do escopo e verificar se algum terceiro que eles usam exige um processo de solicitação por escrito antes de realizar qualquer teste.

Um pentest bem-sucedido requer uma quantidade considerável de organização e preparação. Deve haver um modelo de processo simples que possamos seguir e, ao mesmo tempo, adaptar-se às necessidades de nossos clientes, pois cada ambiente que encontrarmos será diferente e terá suas próprias nuances. Em alguns casos, podemos trabalhar com clientes que nunca experimentaram um pentest antes, e temos que ser capazes de explicar esse processo em detalhes para garantir que eles tenham uma compreensão clara de nossas atividades planejadas, e os ajudamos a definir o escopo da avaliação com precisão.

Em princípio, os funcionários não são informados sobre os próximos testes de penetração. No entanto, os gerentes podem decidir informar seus funcionários sobre os testes. Isso ocorre porque os funcionários têm o direito de saber quando não têm expectativas de privacidade.

Porque nós, como testadores de penetração, podemos encontrar dados pessoais, como nomes, endereços, salários e muito mais. A melhor coisa que podemos fazer para defender a Lei de Proteção de Dados é manter essas informações privadas. Outro exemplo seria termos acesso a um banco de dados com números de cartão de crédito, nomes e códigos CVV. Assim, recomendamos que nossos clientes aprimorem e alterem as senhas o mais rápido possível e criptografem os dados no banco de dados.

## Testing Methods

Uma parte essencial do processo é o ponto de partida a partir do qual devemos realizar nosso pentest. Cada pentest pode ser realizado a partir de duas perspectivas diferentes:

- Interna e Externa

### External Penetration

Muitos pentests são realizados de uma perspectiva externa ou como um usuário anônimo na Internet. A maioria dos clientes deseja garantir a maior proteção possível contra ataques em seu perímetro de rede externo. Podemos realizar testes de nosso próprio host (esperançosamente usando uma conexão VPN para evitar que nosso ISP nos bloqueie) ou de um VPS. Alguns clientes não se importarão com discrição, enquanto outros solicitarão que procedamos o mais silenciosamente possível e nos aproximemos dos sistemas de destino para evitar ser banido pelos firewalls e sistemas IDS/IPS e evitar o acionamento de um alarme. Eles podem pedir uma abordagem furtiva ou "híbrida", onde gradualmente nos tornamos "mais barulhentos" para testar suas capacidades de detecção. Em última análise, nosso objetivo aqui é acessar hosts externos, obter dados confidenciais ou obter acesso à rede interna.

### Internal Penetration Test

Em contraste com um pentest externo, um pentest interno é quando realizamos testes de dentro da rede corporativa. Esta etapa pode ser executada após a penetração bem-sucedida na rede corporativa por meio do pentest externo ou a partir de um cenário de violação presumido. Pentests internos também podem acessar sistemas isolados sem qualquer tipo de acesso à internet, o que geralmente requer nossa presença física nas instalações do cliente.

## Types of Penetration Testing

Não importa como começamos o pentest, o tipo de pentest desempenha um papel importante. Esse tipo determina quanta informação é disponibilizada para nós. Podemos restringir esses tipos ao seguinte:

- Blackbox: Mínimo. Apenas as informações essenciais, como endereços IP e domínios, são fornecidas.
- Greybox: Estendido. Nesse caso, recebemos informações adicionais, como URLs específicos, nomes de host, sub-redes e similares.
- Whitebox: Máximo. Aqui tudo nos é divulgado. Isso nos dá uma visão interna de toda a estrutura, o que nos permite preparar um ataque usando informações internas. Podemos receber configurações detalhadas, credenciais de administrador, código-fonte do aplicativo da web, etc.
- Red-Teaming: Pode incluir testes físicos e engenharia social, entre outras coisas. Pode ser combinado com qualquer um dos tipos acima.
- Purple-Teaming: Pode ser combinado com qualquer um dos tipos acima. No entanto, ele se concentra em trabalhar de perto com os defensores.

Quanto menos informações recebermos, mais longa e complexa será a abordagem. Por exemplo, para um teste de penetração blackbox, devemos primeiro obter uma visão geral de quais servidores, hosts e serviços estão presentes na infraestrutura, especialmente se redes inteiras forem testadas. Esse tipo de reconhecimento pode levar um tempo considerável, especialmente se o cliente solicitou uma abordagem mais discreta para o teste.

## Types of Testing Environments

Além do método de teste e do tipo de teste, outra consideração é o que deve ser testado, que pode ser resumido nas seguintes categorias:

|   |   |   |   |   |
|---|---|---|---|---|
|Network|Web App|Mobile|API|Thick Clients|
|IoT|Cloud|Source Code|Physical Security|Employees|
|Hosts|Server|Security Policies|Firewalls|IDS/IPS|

É importante observar que essas categorias geralmente podem ser misturadas. Todos os componentes de teste listados podem ser incluídos dependendo do tipo de teste a ser realizado. Agora vamos mudar de marcha e cobrir o Processo de Penetração em profundidade para ver como cada fase é dividida e depende da anterior.