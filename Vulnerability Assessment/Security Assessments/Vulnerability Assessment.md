A `Vulnerability Assessment` visa identificar e categorizar riscos de deficiências de segurança relacionadas a ativos em um ambiente. É importante notar que `há pouca ou nenhuma exploração manual durante uma avaliação de vulnerabilidade`. Uma avaliação de vulnerabilidade também fornece etapas de correção para corrigir os problemas.

O objetivo de um `Vulnerability Assessment` é entender, identificar e categorizar o risco para os problemas mais aparentes presentes em um ambiente sem realmente explorá-los para obter mais acesso. Dependendo do escopo da avaliação, alguns clientes podem solicitar que validemos o maior número possível de vulnerabilidades, realizando uma exploração minimamente invasiva para confirmar as descobertas do scanner e descartar falsos positivos. Outros clientes solicitarão um relatório de todas as descobertas identificadas pelo scanner. Como em qualquer avaliação, é essencial esclarecer o escopo e a intenção da avaliação de vulnerabilidades antes de iniciar. O gerenciamento de vulnerabilidade é vital para ajudar as organizações a identificar os pontos fracos de seus ativos, entender o nível de risco e calcular e priorizar os esforços de remediação.

Também é importante observar que as organizações devem sempre testar patches substanciais antes de empurrá-las para o ambiente para evitar interrupções.

## Metodologia

Abaixo está uma amostra da metodologia de avaliação de vulnerabilidades que a maioria das organizações poderia seguir e encontrar sucesso. As metodologias podem variar um pouco de organização para organização, mas este gráfico abrange as principais etapas, desde a identificação de ativos até a criação de um plano de remediação. 

![processo](https://academy.hackthebox.com/storage/modules/108/graphics/VulnerabilityAssessment_Diagram_06a.png) _Adaptado do gráfico original encontrado [aqui](https://purplesec.us/wp-content/uploads/2019/07/8-steps-to-performing-a-network-vulnerability-assessment-infographic.png)._

## Compreendendo os principais termos

Antes de prosseguirmos, vamos identificar alguns termos-chave que qualquer profissional de TI ou Infosec deve entender e ser capaz de explicar claramente.

### Vulnerability

A `Vulnerability` é uma fraqueza ou bug no ambiente de uma organização, incluindo aplicativos, redes e infraestrutura, que abre a possibilidade de ameaças de atores externos. As vulnerabilidades podem ser registradas através do MITRE [Banco de dados de exposição comum à vulnerabilidade](https://cve.mitre.org/) e receber uma pontuação [Sistema comum de pontuação de vulnerabilidade ( CVSS )](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator) para determinar a gravidade. Esse sistema de pontuação é frequentemente usado como um padrão para empresas e governos que buscam calcular pontuações de gravidade precisas e consistentes para as vulnerabilidades de seus sistemas. Marcar vulnerabilidades dessa maneira ajuda a priorizar recursos e determinar como responder a uma determinada ameaça. As pontuações são calculadas usando métricas como o tipo de vetor de ataque ( rede, adjacente, local, física ), a complexidade do ataque, privilégios necessários, independentemente de o ataque exigir ou não interação do usuário, e o impacto da exploração bem-sucedida na confidencialidade, integridade e disponibilidade de dados de uma organização. As pontuações podem variar de 0 a 10, dependendo dessas métricas.

![[Pasted image 20230702205922.png]]

Por exemplo, a injeção de SQL é considerada uma vulnerabilidade, pois um invasor pode alavancar consultas para extrair dados do banco de dados de uma organização. Esse ataque teria uma classificação de pontuação CVSS mais alta se pudesse ser realizado sem autenticação pela Internet do que se um invasor precisasse de acesso autenticado à rede interna e autenticação separada à aplicação alvo. Esses tipos de coisas devem ser considerados para todas as vulnerabilidades que encontramos.

### Threat

A `Threat` é um processo que amplia o potencial de um evento adverso, como um ator de ameaça que explora uma vulnerabilidade. Algumas vulnerabilidades levantam mais preocupações com ameaças sobre outras devido à probabilidade de a vulnerabilidade ser explorada. Por exemplo, quanto maior a recompensa do resultado e a facilidade de exploração, maior a probabilidade de o problema ser explorado pelos atores ameaçadores.

### Exploit

Um `Exploit` é qualquer código ou recursos que possam ser usados para tirar proveito da fraqueza de um ativo. Muitas explorações estão disponíveis através de plataformas de código aberto, como [Exploitdb](https://exploitdb.com/) ou [o banco de dados de vulnerabilidade e exploração Rapid7](https://www.rapid7.com/db/). Muitas vezes, também veremos o código de exploração hospedado em sites como GitHub e GitLab.

### Risk

`Risco` é a possibilidade de ativos ou dados serem prejudicados ou destruídos por atores ameaçadores.

![[Pasted image 20230702210130.png]]

Para diferenciar os três, podemos pensar da seguinte maneira:
- Risk: algo ruim que poderia acontecer
- Threat: algo ruim que está acontecendo
- Vulnerabilities: fraquezas que podem levar a uma ameaça

Vulnerabilidades, ameaças e explorações participam da medição do nível de risco em fraquezas, determinando a probabilidade e o impacto. Por exemplo, vulnerabilidades que possuem código de exploração confiável e provavelmente serão usadas para obter acesso à rede de uma organização aumentariam significativamente o risco de um problema devido ao impacto. Se um invasor tivesse acesso à rede interna, ele poderia potencialmente visualizar, editar ou excluir documentos confidenciais cruciais para as operações comerciais. Podemos usar uma matriz de risco qualitativa para medir o risco com base na probabilidade e no impacto com a tabela mostrada abaixo.

![[Pasted image 20230702210221.png]]

Neste exemplo, podemos ver que uma vulnerabilidade com baixa probabilidade de ocorrência e baixo impacto seria o menor nível de risco, enquanto uma vulnerabilidade com alta probabilidade de ser explorada e o maior impacto em uma organização representaria o maior risco e desejaria ser priorizada para remediação.

## Gerenciamento de ativos

Quando uma organização de qualquer tipo, em qualquer setor e de qualquer tamanho precisa planejar sua estratégia de segurança cibernética, deve começar criando um inventário de suas `data assets`. Se você deseja proteger alguma coisa, primeiro deve saber o que está protegendo! Depois que os ativos forem inventariados, você poderá iniciar o processo de `asset management`. Este é um conceito-chave na segurança defensiva.

#### Inventário de ativos

`Asset inventory` é um componente crítico do gerenciamento de vulnerabilidades. Uma organização precisa entender quais ativos estão em sua rede para fornecer a proteção adequada e configurar as defesas apropriadas. O inventário de ativos deve incluir ativos de tecnologia da informação, tecnologia operacional, físico, software, móvel e desenvolvimento. As organizações podem utilizar ferramentas de gerenciamento de ativos para acompanhar os ativos. Os ativos devem ter classificações de dados para garantir controles adequados de segurança e acesso.

#### Inventário de aplicativos e sistemas

Uma organização deve criar um inventário completo e completo dos ativos de dados para o gerenciamento adequado de ativos para segurança defensiva. Os ativos de dados incluem:

- Todos os dados armazenados no local. HDDs e SSDs em pontos finais ( PCs e dispositivos móveis ), HDDs e SSDs em servidores, unidades externas na rede local, mídia óptica ( DVDs, discos Blu-ray, CDs ), mídia flash ( pen drives, cartões SD ). A tecnologia herdada pode incluir disquetes, unidades ZIP ( uma relíquia dos anos 90 ) e unidades de fita.
- Todo o armazenamento de dados que seu provedor de nuvem possui. [Serviços da Web da Amazon](https://aws.amazon.com/) (`AWS`), [Plataforma Google Cloud](https://cloud.google.com/) (`GCP`) e [Microsoft Azure](https://azure.microsoft.com/en-us/) são alguns dos provedores de nuvem mais populares, mas existem muitos mais. Às vezes, as redes corporativas são "multicloud", o que significa que elas têm mais de um provedor de nuvem. O provedor de nuvem de uma empresa fornecerá ferramentas que podem ser usadas para inventariar todos os dados armazenados por esse provedor de nuvem específico.
- Todos os dados armazenados em várias aplicações `Software-as-a-Service (SaaS)`. Esses dados também estão "na nuvem", mas podem não estar todos dentro do escopo de uma conta corporativa de provedor de nuvem. Geralmente, esses são serviços ao consumidor ou a versão "comercial" desses serviços. Pense em serviços online, como `Google Drive`, `Dropbox`, `Microsoft Teams`, `Apple iCloud`, `Adobe Creative Suite`, `Microsoft Office 365`, `Google Docs`, e a lista continua.
- Todos os aplicativos que uma empresa precisa usar para realizar sua operação e negócios habituais. Incluindo aplicativos implantados localmente e aplicativos implantados na nuvem ou que sejam de outra forma Software como Serviço.
- Todos os dispositivos de rede de computadores locais de uma empresa. Isso inclui, mas não está limitado a `routers`, `firewalls`, `hubs`, `switches`, dedicado `intrusion detection` e `prevention systems` (`IDS/IPS`), `data loss prevention` (Sistemas `DLP` ) e assim por diante.

Todos esses ativos são muito importantes. Um ator de ameaça ou qualquer outro tipo de risco para qualquer um desses ativos pode causar danos significativos à segurança da informação de uma empresa e à capacidade de operar dia após dia. Uma organização precisa dedicar um tempo para avaliar tudo e ter cuidado para não perder um único ativo de dados ou não poderá protegê-lo.

As organizações frequentemente adicionam ou removem computadores, armazenamento de dados, capacidade do servidor em nuvem ou outros ativos de dados. Sempre que os ativos de dados são adicionados ou removidos, isso deve ser observado minuciosamente no `data asset inventory`.

