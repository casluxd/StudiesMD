Toda organização deve executar diferentes tipos de `avaliações de segurança` em suas`redes`, `computadores`, e `aplicações` pelo menos de vez em quando. O objetivo principal da maioria dos tipos de avaliações de segurança é encontrar e confirmar que vulnerabilidades estão presentes, para que possamos trabalhar para `patch`, `mitigação`, ou `remover` eles. Existem diferentes maneiras e metodologias para testar a segurança de um sistema de computador. Alguns tipos de avaliações de segurança são mais apropriados para determinadas redes do que outros. Mas todos eles servem a um propósito na melhoria da segurança cibernética. Todas as organizações têm diferentes requisitos de conformidade e tolerância a riscos, enfrentam ameaças diferentes e têm modelos de negócios diferentes que determinam os tipos de sistemas que executam externa e internamente. Algumas organizações têm uma postura de segurança muito mais madura do que seus pares e podem se concentrar em simulações avançadas de equipes vermelhas conduzidas por terceiros, enquanto outras ainda estão trabalhando para estabelecer a segurança da linha de base. Independentemente disso, todas as organizações devem manter-se no topo das vulnerabilidades herdadas e recentes e ter um sistema para detectar e mitigar riscos para seus sistemas e dados.

## Avaliação da vulnerabilidade

`Vulnerability assessments` são apropriados para todas as organizações e redes. Uma avaliação de vulnerabilidade é baseada em um padrão de segurança específico e a conformidade com esses padrões é analisada (por exemplo, passando por uma lista de verificação).

Uma avaliação de vulnerabilidade pode ser baseada em vários padrões de segurança. Quais padrões se aplicam a uma rede específica dependerão de muitos fatores. Esses fatores podem incluir regulamentos regionais e de segurança de dados específicos do setor, o tamanho e a forma da rede de uma empresa, quais tipos de aplicativos eles usam ou desenvolvem e seu nível de maturidade de segurança.

As avaliações de vulnerabilidade podem ser realizadas de forma independente ou juntamente com outras avaliações de segurança, dependendo da situação de uma organização.

## Teste de penetração

Eles são chamados de testes de penetração porque os testadores os conduzem para determinar se e como eles podem penetrar em uma rede. Um pentest é um tipo de ataque cibernético simulado, e os pentesters realizam ações que um ator de ameaça pode executar para ver se certos tipos de façanhas são possíveis. A principal diferença entre um ataque cibernético pentest e um ataque cibernético real é que o primeiro é feito com o consentimento legal total da entidade sendo pentestada. Se um pentista é um funcionário ou um contratado terceirizado, eles precisarão assinar um longo documento legal com a empresa-alvo que descreva o que eles podem fazer e o que não podem fazer.

Como na avaliação de vulnerabilidades, um pentest eficaz resultará em um relatório detalhado cheio de informações que podem ser usadas para melhorar a segurança de uma rede. Todos os tipos de pentestes podem ser realizados de acordo com as necessidades específicas de uma organização.

O pentest `Black box` é feito sem o conhecimento da configuração ou dos aplicativos de uma rede. Normalmente, um testador recebe acesso à rede (ou uma porta Ethernet e precisa ignorar o NAC de controle de acesso à rede) e nada mais (exigindo que eles realizem sua própria descoberta para endereços IP) se o pentest for interno. Nada mais que o nome da empresa se o pentest for do ponto de vista externo. Esse tipo de pentest é geralmente conduzido por terceiros da perspectiva de um atacante `externo`. Freqüentemente, o cliente solicita ao pentista que mostre a eles endereços IP / faixas de rede internos / externos descobertos, para que eles possam confirmar a propriedade e anotar quaisquer hosts que devam ser considerados fora do escopo.

O pentest`Grey box` é feito com um pouco de conhecimento da rede que eles estão testando, de uma perspectiva equivalente a um `funcionário` que não trabalha no departamento de TI, como um `recepcionista` ou `customer service agent`. O cliente normalmente fornece intervalos de rede no escopo do testador ou endereços IP individuais em uma situação de caixa cinza.

O pentest `White box` é normalmente realizado, dando ao testador de penetração acesso total a todos os sistemas, configurações, documentos de compilação etc. e código fonte se os aplicativos da Web estiverem no escopo. O objetivo aqui é descobrir o maior número possível de falhas que seriam difíceis ou impossíveis de descobrir cegamente em um período de tempo razoável.

Muitas vezes, os pentesters se especializam em uma área específica. Os testadores de penetração devem ter conhecimento de muitas tecnologias diferentes, mas ainda assim geralmente têm uma especialidade.

Os pentesters de `Aplicações` avaliam aplicativos da Web, aplicativos de cliente espesso, APIs e aplicativos móveis. Eles geralmente são versados na revisão do código-fonte e são capazes de avaliar um determinado aplicativo da Web do ponto de vista da caixa preta ou da caixa branca ( tipicamente uma revisão segura do código ).

Os pentesters de `rede` ou `infraestrutura` avaliam todos os aspectos de uma rede de computadores, incluindo seus `dispositivos de rede` como roteadores e firewalls, estações de trabalho, servidores e aplicativos. Esses tipos de testadores de penetração geralmente devem ter um forte entendimento de redes, Windows, Linux, Active Directory e pelo menos uma linguagem de script. Scanners de vulnerabilidade de rede, como `Nessus`, pode ser usado juntamente com outras ferramentas durante a penteste em rede, mas a verificação de vulnerabilidades em rede é apenas parte de um pentest adequado. É importante observar que existem diferentes tipos de pentestes ( evasivos, não evasivos, híbridos evasivos ). Um scanner como o Nessus seria usado apenas durante um pentest não evasivo, cujo objetivo é encontrar o maior número possível de falhas na rede. Além disso, a verificação de vulnerabilidades seria apenas uma pequena parte desse tipo de teste de penetração. Os scanners de vulnerabilidade são úteis, mas limitados, e não podem substituir o toque humano e outras ferramentas e técnicas.

Os pentesters `físicos` tentam alavancar as fraquezas da segurança física e as falhas nos processos para obter acesso a uma instalação, como um data center ou prédio de escritórios.
- Você pode abrir uma porta de maneira não intencional?
- Você pode levar alguém para o data center?
- Você pode rastejar através de uma abertura?

Pentesters de `engenharia social` testam seres humanos.
- Os funcionários podem ser enganados por phishing, vishing ( phishing por telefone ) ou outros golpes?
- Um pentista de engenharia social pode ir até uma recepcionista e dizer: "sim, eu trabalho aqui?

O pentest é mais apropriado para organizações com um nível de maturidade de segurança médio ou alto. A maturidade da segurança mede o quão bem desenvolvido é o programa de segurança cibernética de uma empresa e a maturidade da segurança leva anos para ser construída. Envolve a contratação de profissionais de segurança cibernética com conhecimento, políticas e aplicação de segurança bem projetadas (como gerenciamento de configuração, patch e vulnerabilidade), padrões de endurecimento da linha de base para todos os tipos de dispositivos na rede, forte conformidade regulatória, plano de resposta a incidentes cibernéticos bem executada, um experiente `CSIRT` (`computer security incident response team`), um processo estabelecido de controle de alterações, um `CISO` (`chief information security officer`), um `CTO` (`chief technical officer`), testes de segurança frequentes realizados ao longo dos anos e forte cultura de segurança. A cultura de segurança tem tudo a ver com a atitude e os hábitos que os funcionários têm em relação à segurança cibernética. Parte disso pode ser ensinada por meio de programas de treinamento em conscientização de segurança e parte através da construção de segurança na cultura da empresa. Todos, de secretários a administradores de sistemas e funcionários de nível C, devem ter consciência da segurança, entender como evitar práticas arriscadas e ser instruídos a reconhecer atividades suspeitas que devem ser relatadas à equipe de segurança.

Organizações com um nível mais baixo de maturidade de segurança podem querer se concentrar nas avaliações de vulnerabilidade, porque um pentest pode encontrar muitas vulnerabilidades para ser útil e sobrecarregar a equipe encarregada de remediar. Antes de considerar o teste de penetração, deve haver um histórico de avaliações de vulnerabilidades e ações tomadas em resposta a avaliações de vulnerabilidades.

## Avaliações de vulnerabilidade vs. testes de penetração

`Avaliações de vulnerabilidades`e testes de penetração são duas avaliações completamente diferentes. As avaliações de vulnerabilidade buscam vulnerabilidades nas redes sem simular ataques cibernéticos. Todas as empresas devem realizar avaliações de vulnerabilidade de vez em quando. Uma ampla variedade de padrões de segurança pode ser usada para uma avaliação de vulnerabilidade, como conformidade com GDPR ou padrões de segurança de aplicativos da Web OWASP. Uma avaliação de vulnerabilidade passa por uma lista de verificação.

- Nós atendemos a esse padrão?
- Temos essa configuração?

Durante uma avaliação de vulnerabilidade, o avaliador normalmente executa uma verificação de vulnerabilidade e realiza a validação em vulnerabilidades críticas, altas e de médio risco. Isso significa que eles mostrarão evidências de que a vulnerabilidade existe e não é um falso positivo, geralmente usando outras ferramentas, mas não procurarão executar escalonamento de privilégios, movimento lateral, pós-exploração, etc., se validarem, por exemplo, uma vulnerabilidade de execução remota de código.

`Testes de penetração`, dependendo do tipo, avalie a segurança de diferentes ativos e o impacto dos problemas presentes no ambiente. Os testes de penetração podem incluir táticas manuais e automatizadas para avaliar a postura de segurança de uma organização. Eles também costumam ter uma ideia melhor de quão seguros são os ativos de uma empresa do ponto de vista dos testes. O `pentest` é um ataque cibernético simulado para ver se e como a rede pode ser penetrada. Independentemente do tamanho, setor ou design de rede de uma empresa, os pentests só devem ser realizados após algumas avaliações de vulnerabilidade terem sido realizadas com sucesso e com correções. Uma empresa pode fazer avaliações de vulnerabilidade e pentestar no mesmo ano. Eles podem se complementar. Mas eles são tipos muito diferentes de testes de segurança usados em diferentes situações, e um não é "melhor" do que o outro.

![[Pasted image 20230702204708.png]]

Uma organização pode se beneficiar mais de um `vulnerability assessment` durante um teste de penetração, se eles quiserem receber uma visão de problemas comumente conhecidos mensalmente ou trimestralmente de um fornecedor terceirizado. No entanto, uma organização se beneficiaria mais de um `penetration test` se eles estiverem procurando uma abordagem que utilize técnicas manuais e automatizadas para identificar problemas fora do que um scanner de vulnerabilidade identificaria durante uma avaliação de vulnerabilidade. Um teste de penetração também pode ilustrar uma cadeia de ataques da vida real que um invasor pode utilizar para acessar o ambiente de uma organização. Os indivíduos que realizam testes de penetração têm experiência especializada em testes de rede, testes sem fio, engenharia social, aplicativos da web e outras áreas.

Para organizações que recebem avaliações de testes de penetração anualmente ou semestrais, ainda é crucial que essas organizações avaliem regularmente seu ambiente com verificações internas de vulnerabilidades para identificar novas vulnerabilidades à medida que são liberadas ao público pelos fornecedores.

## Outros tipos de avaliações de segurança

Avaliações de vulnerabilidade e testes de penetração não são os únicos tipos de avaliações de segurança que uma organização pode executar para proteger seus ativos. Outros tipos de avaliações também podem ser necessários, dependendo do tipo de organização.

#### Auditorias de segurança

As avaliações de vulnerabilidade são realizadas porque uma organização escolhe conduzi-las e pode controlar como e quando são avaliadas. As auditorias de segurança são diferentes. `Security audits` normalmente são requisitos de fora da organização e geralmente são obrigatórios por `government agencies` ou `industry associations` garantir que uma organização esteja em conformidade com regulamentos de segurança específicos.

Por exemplo, todos os varejistas, restaurantes e prestadores de serviços on-line e off-line que aceitam os principais cartões de crédito ( Visa, MasterCard, AMEX, etc. ) devem estar em conformidade com o [PCI-DSS "Padrão de segurança de dados da indústria de cartões de pagamento"](https://www.pcicomplianceguide.org/faq/#1). PCI DSS é um regulamento imposto pelo [Conselho de Normas de Segurança da Indústria do Cartão de Pagamento](https://www.pcisecuritystandards.org/), uma organização administrada por empresas de cartão de crédito e entidades do setor de serviços financeiros. Uma empresa que aceita pagamentos com cartão de crédito e débito pode ser auditada quanto à conformidade com o PCI DSS, e a não conformidade pode resultar em multas e não pode mais aceitar esses métodos de pagamento.

Independentemente de quais regulamentos uma organização possa ser auditada, é responsabilidade deles realizar avaliações de vulnerabilidade para garantir que sejam compatíveis antes de serem sujeitos a uma auditoria de segurança surpresa.

### Bug bountys

`Programas de bug bounty` são implementados por todos os tipos de organizações. Eles convidam membros do público em geral, com algumas restrições ( geralmente sem verificação automatizada ), a encontrar vulnerabilidades de segurança em seus aplicativos. Caçadores de recompensas de bugs podem ser pagos entre algumas centenas de dólares e centenas de milhares de dólares por suas descobertas, que é um preço pequeno a pagar por uma empresa para evitar que uma vulnerabilidade crítica à execução remota de código caia nas mãos erradas.

Empresas maiores, com grandes bases de clientes e alta maturidade de segurança, são apropriadas para programas de recompensas de bugs. Eles precisam ter uma equipe dedicada a triagem e análise de relatórios de erros e estar em uma situação em que possam suportar pessoas de fora que procuram vulnerabilidades em seus produtos.

Empresas como Microsoft e Apple são ideais para ter programas de recompensas por bugs devido a milhões de clientes e maturidade robusta em segurança.

#### Avaliação da equipe vermelha

Empresas com orçamentos maiores e mais recursos podem contratar seus próprios `red teams` ou use os serviços de empresas de consultoria terceirizadas para realizar avaliações de equipes vermelhas. Uma equipe vermelha é composta por profissionais de segurança ofensivos que têm uma experiência considerável com testes de penetração. Uma equipe vermelha desempenha um papel vital na postura de segurança de uma organização.

Uma equipe vermelha é um tipo de caixa preta evasiva que penta, simulando todos os tipos de ataques cibernéticos da perspectiva de um ator de ameaça externa. Essas avaliações geralmente têm um objetivo final ( ou seja, atingir um servidor ou banco de dados crítico etc. ). Os avaliadores relatam apenas as vulnerabilidades que levaram à conclusão da meta, não tantas vulnerabilidades quanto possível com um teste de penetração.

Se uma empresa possui sua própria equipe vermelha interna, seu trabalho é realizar testes de penetração mais direcionados com o conhecimento de uma fonte de sua rede. Uma equipe vermelha deve estar constantemente envolvida em equipes vermelhas `campaigns`. As campanhas podem ser baseadas em novas explorações cibernéticas descobertas através das ações de `advanced persistent threat groups` (`APTs`), por exemplo. Outras campanhas podem ter como alvo tipos específicos de vulnerabilidades para explorá-las em detalhes, uma vez que uma organização as tenha informado.

Idealmente, se uma empresa pode pagar e está aumentando sua maturidade de segurança, deve realizar avaliações regulares de vulnerabilidade por conta própria, contrate terceiros para realizar testes de penetração ou avaliações da equipe vermelha e, se apropriado, construa uma equipe vermelha interna para realizar pentesting em caixa cinza e branca com parâmetros e escopos mais específicos.

#### Avaliação da equipe roxa

Uma `blue team` consiste em especialistas em segurança defensiva. Geralmente, são pessoas que trabalham em um centro de operações de segurança SOC ou em uma equipe de resposta a incidentes de segurança de computadores CSIRT (Muitas vezes, eles também têm experiência com forense digital). Portanto, se as equipes azuis estão na defensiva e as equipes vermelhas são ofensivas, o vermelho misturado com o azul é roxo.

- O que é uma purple team?
`Purple teams` são formados quando especialistas em segurança `ofensivos` e `defensivos` trabalham em conjunto com um objetivo comum, melhorar a segurança de sua rede. As equipes vermelhas encontram problemas de segurança e as equipes azuis aprendem sobre esses problemas com suas equipes vermelhas e trabalham para corrigi-los. Uma avaliação da equipe roxa é como uma avaliação da equipe vermelha, mas a equipe azul também está envolvida a cada passo. A equipe azul pode até desempenhar um papel no design de campanhas. "Precisamos melhorar nossa conformidade com o PCI DSS. Então, vamos assistir a equipe vermelha reprimir nossos sistemas de ponto de venda e fornecer informações e comentários ativos durante o trabalho."

